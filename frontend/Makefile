.PHONY: help install lint format test qa clean build dev

# Variables
NPM := npm
NODE := node

help:
	@echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
	@echo "â•‘           Frontend Makefile Commands                       â•‘"
	@echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
	@echo ""
	@echo "Setup:"
	@echo "  make install    - Install dependencies"
	@echo ""
	@echo "Development:"
	@echo "  make dev        - Start development server"
	@echo "  make build      - Build production bundle"
	@echo ""
	@echo "Code Quality:"
	@echo "  make lint       - Run ESLint"
	@echo "  make format     - Format code with Prettier"
	@echo ""
	@echo "Testing:"
	@echo "  make test       - Run tests with coverage"
	@echo ""
	@echo "Complete QA:"
	@echo "  make qa         - Run full QA suite (format + lint + test)"
	@echo ""
	@echo "Maintenance:"
	@echo "  make clean      - Clean build artifacts and dependencies"
	@echo ""

install:
	@echo "ğŸ“¦ Installing frontend dependencies..."
	$(NPM) install
	@echo "âœ“ Dependencies installed"

dev:
	@echo "ğŸš€ Starting development server..."
	$(NPM) start

lint:
	@echo ""
	@echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
	@echo "Running Frontend Linting..."
	@echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
	@echo ""
	@echo "1ï¸âƒ£  Running ESLint..."
	@$(NPM) run lint || (echo "âŒ ESLint found issues" && exit 1)
	@echo "âœ“ ESLint passed"
	@echo ""
	@echo "2ï¸âƒ£  Checking code formatting..."
	@$(NPM) run format:check || (echo "âŒ Code not formatted correctly" && exit 1)
	@echo "âœ“ Code formatting is correct"
	@echo ""
	@echo "âœ… All linting checks passed!"

format:
	@echo "ğŸ¨ Formatting frontend code..."
	@$(NPM) run format
	@echo "âœ“ Code formatted"

test:
	@echo ""
	@echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
	@echo "Running Frontend Tests..."
	@echo "â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
	@echo ""
	@$(NPM) test || (echo "âŒ Tests failed" && exit 1)
	@echo ""
	@echo "âœ… All tests passed!"
	@echo "ğŸ“Š Coverage report generated in coverage/"

build:
	@echo "ğŸ—ï¸  Building production bundle..."
	@$(NPM) run build
	@echo "âœ“ Build complete! Output in build/"

qa: format lint test
	@echo ""
	@echo "â•”â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•—"
	@echo "â•‘                                                            â•‘"
	@echo "â•‘        âœ…  FRONTEND QA SUITE COMPLETED SUCCESSFULLY!       â•‘"
	@echo "â•‘                                                            â•‘"
	@echo "â•šâ•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•"
	@echo ""

clean:
	@echo "ğŸ§¹ Cleaning frontend..."
	@rm -rf node_modules build dist coverage .cache
	@rm -f package-lock.json
	@echo "âœ“ Cleanup complete!"